// Magnific Popup v1.1.0 by Dmitry Semenov
// http://bit.ly/magnific-popup#build=inline+image+ajax+iframe+gallery+retina+imagezoom
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery||window.Zepto)}(function(d){var l="Close",c="BeforeClose",i="AfterClose",n="BeforeAppend",p="MarkupParse",u="Open",o="Change",a="mfp",f="."+a,m="mfp-ready",r="mfp-removing",s="mfp-prevent-close",g,e=function(){},h=!!window.jQuery,v,y=d(window),b,w,C,t,x=function(e,t){g.ev.on(a+e+f,t)},k=function(e,t,i,n){var o=document.createElement("div");return o.className="mfp-"+e,i&&(o.innerHTML=i),n?t&&t.appendChild(o):(o=d(o),t&&o.appendTo(t)),o},I=function(e,t){g.ev.triggerHandler(a+e,t),g.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),g.st.callbacks[e]&&g.st.callbacks[e].apply(g,d.isArray(t)?t:[t]))},_=function(e){return e===t&&g.currTemplate.closeBtn||(g.currTemplate.closeBtn=d(g.st.closeMarkup.replace("%title%",g.st.tClose)),t=e),g.currTemplate.closeBtn},P=function(){d.magnificPopup.instance||((g=new e).init(),d.magnificPopup.instance=g)},T=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};e.prototype={constructor:e,init:function(){var e=navigator.appVersion;g.isLowIE=g.isIE8=document.all&&!document.addEventListener,g.isAndroid=/android/gi.test(e),g.isIOS=/iphone|ipad|ipod/gi.test(e),g.supportsTransition=T(),g.probablyMobile=g.isAndroid||g.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),b=d(document),g.popupsCache={}},open:function(e){var t;if(!1===e.isObj){g.items=e.items.toArray(),g.index=0;var i=e.items,n;for(t=0;t<i.length;t++)if((n=i[t]).parsed&&(n=n.el[0]),n===e.el[0]){g.index=t;break}}else g.items=d.isArray(e.items)?e.items:[e.items],g.index=e.index||0;if(!g.isOpen){g.types=[],C="",e.mainEl&&e.mainEl.length?g.ev=e.mainEl.eq(0):g.ev=b,e.key?(g.popupsCache[e.key]||(g.popupsCache[e.key]={}),g.currTemplate=g.popupsCache[e.key]):g.currTemplate={},g.st=d.extend(!0,{},d.magnificPopup.defaults,e),g.fixedContentPos="auto"===g.st.fixedContentPos?!g.probablyMobile:g.st.fixedContentPos,g.st.modal&&(g.st.closeOnContentClick=!1,g.st.closeOnBgClick=!1,g.st.showCloseBtn=!1,g.st.enableEscapeKey=!1),g.bgOverlay||(g.bgOverlay=k("bg").on("click"+f,function(){g.close()}),g.wrap=k("wrap").attr("tabindex",-1).on("click"+f,function(e){g._checkIfClose(e.target)&&g.close()}),g.container=k("container",g.wrap)),g.contentContainer=k("content"),g.st.preloader&&(g.preloader=k("preloader",g.container,g.st.tLoading));var o=d.magnificPopup.modules;for(t=0;t<o.length;t++){var a=o[t];a=a.charAt(0).toUpperCase()+a.slice(1),g["init"+a].call(g)}I("BeforeOpen"),g.st.showCloseBtn&&(g.st.closeBtnInside?(x(p,function(e,t,i,n){i.close_replaceWith=_(n.type)}),C+=" mfp-close-btn-in"):g.wrap.append(_())),g.st.alignTop&&(C+=" mfp-align-top"),g.fixedContentPos?g.wrap.css({overflow:g.st.overflowY,overflowX:"hidden",overflowY:g.st.overflowY}):g.wrap.css({top:y.scrollTop(),position:"absolute"}),(!1===g.st.fixedBgPos||"auto"===g.st.fixedBgPos&&!g.fixedContentPos)&&g.bgOverlay.css({height:b.height(),position:"absolute"}),g.st.enableEscapeKey&&b.on("keyup"+f,function(e){27===e.keyCode&&g.close()}),y.on("resize"+f,function(){g.updateSize()}),g.st.closeOnContentClick||(C+=" mfp-auto-cursor"),C&&g.wrap.addClass(C);var r=g.wH=y.height(),s={};if(g.fixedContentPos&&g._hasScrollBar(r)){var l=g._getScrollbarSize();l&&(s.marginRight=l)}g.fixedContentPos&&(g.isIE7?d("body, html").css("overflow","hidden"):s.overflow="hidden");var c=g.st.mainClass;return g.isIE7&&(c+=" mfp-ie7"),c&&g._addClassToMFP(c),g.updateItemHTML(),I("BuildControls"),d("html").css(s),g.bgOverlay.add(g.wrap).prependTo(g.st.prependTo||d(document.body)),g._lastFocusedEl=document.activeElement,setTimeout(function(){g.content?(g._addClassToMFP(m),g._setFocus()):g.bgOverlay.addClass(m),b.on("focusin"+f,g._onFocusIn)},16),g.isOpen=!0,g.updateSize(r),I(u),e}g.updateItemHTML()},close:function(){g.isOpen&&(I(c),g.isOpen=!1,g.st.removalDelay&&!g.isLowIE&&g.supportsTransition?(g._addClassToMFP(r),setTimeout(function(){g._close()},g.st.removalDelay)):g._close())},_close:function(){I(l);var e=r+" "+m+" ";if(g.bgOverlay.detach(),g.wrap.detach(),g.container.empty(),g.st.mainClass&&(e+=g.st.mainClass+" "),g._removeClassFromMFP(e),g.fixedContentPos){var t={marginRight:""};g.isIE7?d("body, html").css("overflow",""):t.overflow="",d("html").css(t)}b.off("keyup.mfp focusin"+f),g.ev.off(f),g.wrap.attr("class","mfp-wrap").removeAttr("style"),g.bgOverlay.attr("class","mfp-bg"),g.container.attr("class","mfp-container"),g.st.showCloseBtn&&(!g.st.closeBtnInside||!0===g.currTemplate[g.currItem.type])&&g.currTemplate.closeBtn&&g.currTemplate.closeBtn.detach(),g.st.autoFocusLast&&g._lastFocusedEl&&d(g._lastFocusedEl).focus(),g.currItem=null,g.content=null,g.currTemplate=null,g.prevHeight=0,I(i)},updateSize:function(e){if(g.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*t;g.wrap.css("height",i),g.wH=i}else g.wH=e||y.height();g.fixedContentPos||g.wrap.css("height",g.wH),I("Resize")},updateItemHTML:function(){var e=g.items[g.index];g.contentContainer.detach(),g.content&&g.content.detach(),e.parsed||(e=g.parseEl(g.index));var t=e.type;if(I("BeforeChange",[g.currItem?g.currItem.type:"",t]),g.currItem=e,!g.currTemplate[t]){var i=!!g.st[t]&&g.st[t].markup;I("FirstMarkupParse",i),g.currTemplate[t]=!i||d(i)}w&&w!==e.type&&g.container.removeClass("mfp-"+w+"-holder");var n=g["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,g.currTemplate[t]);g.appendContent(n,t),e.preloaded=!0,I(o,e),w=e.type,g.container.prepend(g.contentContainer),I("AfterChange")},appendContent:function(e,t){(g.content=e)?g.st.showCloseBtn&&g.st.closeBtnInside&&!0===g.currTemplate[t]?g.content.find(".mfp-close").length||g.content.append(_()):g.content=e:g.content="",I(n),g.container.addClass("mfp-"+t+"-holder"),g.contentContainer.append(g.content)},parseEl:function(e){var t=g.items[e],i;if((t=t.tagName?{el:d(t)}:(i=t.type,{data:t,src:t.src})).el){for(var n=g.types,o=0;o<n.length;o++)if(t.el.hasClass("mfp-"+n[o])){i=n[o];break}t.src=t.el.attr("data-mfp-src"),t.src||(t.src=t.el.attr("href"))}return t.type=i||g.st.type||"inline",t.index=e,t.parsed=!0,g.items[e]=t,I("ElementParse",t),g.items[e]},addGroup:function(t,i){var e=function(e){e.mfpEl=this,g._openClick(e,t,i)};i||(i={});var n="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(n).on(n,e)):(i.isObj=!1,i.delegate?t.off(n).on(n,i.delegate,e):(i.items=t).off(n).on(n,e))},_openClick:function(e,t,i){var n;if((void 0!==i.midClick?i.midClick:d.magnificPopup.defaults.midClick)||!(2===e.which||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var o=void 0!==i.disableOn?i.disableOn:d.magnificPopup.defaults.disableOn;if(o)if(d.isFunction(o)){if(!o.call(g))return!0}else if(y.width()<o)return!0;e.type&&(e.preventDefault(),g.isOpen&&e.stopPropagation()),i.el=d(e.mfpEl),i.delegate&&(i.items=t.find(i.delegate)),g.open(i)}},updateStatus:function(e,t){if(g.preloader){v!==e&&g.container.removeClass("mfp-s-"+v),!t&&"loading"===e&&(t=g.st.tLoading);var i={status:e,text:t};I("UpdateStatus",i),e=i.status,t=i.text,g.preloader.html(t),g.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),g.container.addClass("mfp-s-"+e),v=e}},_checkIfClose:function(e){if(!d(e).hasClass(s)){var t=g.st.closeOnContentClick,i=g.st.closeOnBgClick;if(t&&i)return!0;if(!g.content||d(e).hasClass("mfp-close")||g.preloader&&e===g.preloader[0])return!0;if(e===g.content[0]||d.contains(g.content[0],e)){if(t)return!0}else if(i&&d.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){g.bgOverlay.addClass(e),g.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),g.wrap.removeClass(e)},_hasScrollBar:function(e){return(g.isIE7?b.height():document.body.scrollHeight)>(e||y.height())},_setFocus:function(){(g.st.focus?g.content.find(g.st.focus).eq(0):g.wrap).focus()},_onFocusIn:function(e){if(e.target!==g.wrap[0]&&!d.contains(g.wrap[0],e.target))return g._setFocus(),!1},_parseMarkup:function(o,e,t){var a;t.data&&(e=d.extend(t.data,e)),I(p,[o,e,t]),d.each(e,function(e,t){if(void 0===t||!1===t)return!0;if(1<(a=e.split("_")).length){var i=o.find(f+"-"+a[0]);if(0<i.length){var n=a[1];"replaceWith"===n?i[0]!==t[0]&&i.replaceWith(t):"img"===n?i.is("img")?i.attr("src",t):i.replaceWith(d("<img>").attr("src",t).attr("class",i.attr("class"))):i.attr(a[1],t)}}else o.find(f+"-"+e).html(t)})},_getScrollbarSize:function(){if(void 0===g.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),g.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return g.scrollbarSize}},d.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return P(),(e=e?d.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return d.magnificPopup.instance&&d.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(d.magnificPopup.defaults[e]=t.options),d.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},d.fn.magnificPopup=function(e,t){P();var i=d(this);if("string"==typeof e)if("open"===e){var n,o=h?i.data("magnificPopup"):i[0].magnificPopup,a=parseInt(t,10)||0;n=o.items?o.items[a]:(n=i,o.delegate&&(n=n.find(o.delegate)),n.eq(a)),g._openClick({mfpEl:n},i,o)}else g.isOpen&&g[e].apply(g,Array.prototype.slice.call(arguments,1));else e=d.extend(!0,{},e),h?i.data("magnificPopup",e):i[0].magnificPopup=e,g.addGroup(i,e);return i};var S="inline",E,z,O,M=function(){O&&(z.after(O.addClass(E)).detach(),O=null)};d.magnificPopup.registerModule(S,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){g.types.push(S),x(l+"."+S,function(){M()})},getInline:function(e,t){if(M(),e.src){var i=g.st.inline,n=d(e.src);if(n.length){var o=n[0].parentNode;o&&o.tagName&&(z||(E=i.hiddenClass,z=k(E),E="mfp-"+E),O=n.after(z).detach().removeClass(E)),g.updateStatus("ready")}else g.updateStatus("error",i.tNotFound),n=d("<div>");return e.inlineElement=n}return g.updateStatus("ready"),g._parseMarkup(t,{},e),t}}});var B="ajax",L,H=function(){L&&d(document.body).removeClass(L)},A=function(){H(),g.req&&g.req.abort()};d.magnificPopup.registerModule(B,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){g.types.push(B),L=g.st.ajax.cursor,x(l+"."+B,A),x("BeforeChange."+B,A)},getAjax:function(o){L&&d(document.body).addClass(L),g.updateStatus("loading");var e=d.extend({url:o.src,success:function(e,t,i){var n={data:e,xhr:i};I("ParseAjax",n),g.appendContent(d(n.data),B),o.finished=!0,H(),g._setFocus(),setTimeout(function(){g.wrap.addClass(m)},16),g.updateStatus("ready"),I("AjaxContentAdded")},error:function(){H(),o.finished=o.loadError=!0,g.updateStatus("error",g.st.ajax.tError.replace("%url%",o.src))}},g.st.ajax.settings);return g.req=d.ajax(e),""}}});var F,j=function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=g.st.image.titleSrc;if(t){if(d.isFunction(t))return t.call(g,e);if(e.el)return e.el.attr(t)||""}return""};d.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=g.st.image,t=".image";g.types.push("image"),x(u+t,function(){"image"===g.currItem.type&&e.cursor&&d(document.body).addClass(e.cursor)}),x(l+t,function(){e.cursor&&d(document.body).removeClass(e.cursor),y.off("resize"+f)}),x("Resize"+t,g.resizeImage),g.isLowIE&&x("AfterChange",g.resizeImage)},resizeImage:function(){var e=g.currItem;if(e&&e.img&&g.st.image.verticalFit){var t=0;g.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",g.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,F&&clearInterval(F),e.isCheckingImgSize=!1,I("ImageHasSize",e),e.imgHidden&&(g.content&&g.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(t){var i=0,n=t.img[0],o=function(e){F&&clearInterval(F),F=setInterval(function(){0<n.naturalWidth?g._onImageHasSize(t):(200<i&&clearInterval(F),3===++i?o(10):40===i?o(50):100===i&&o(500))},e)};o(1)},getImage:function(e,t){var i=0,n=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===g.currItem&&(g._onImageHasSize(e),g.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,I("ImageLoadComplete")):++i<200?setTimeout(n,100):o())},o=function(){e&&(e.img.off(".mfploader"),e===g.currItem&&(g._onImageHasSize(e),g.updateStatus("error",a.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},a=g.st.image,r=t.find(".mfp-img");if(r.length){var s=document.createElement("img");s.className="mfp-img",e.el&&e.el.find("img").length&&(s.alt=e.el.find("img").attr("alt")),e.img=d(s).on("load.mfploader",n).on("error.mfploader",o),s.src=e.src,r.is("img")&&(e.img=e.img.clone()),0<(s=e.img[0]).naturalWidth?e.hasSize=!0:s.width||(e.hasSize=!1)}return g._parseMarkup(t,{title:j(e),img_replaceWith:e.img},e),g.resizeImage(),e.hasSize?(F&&clearInterval(F),e.loadError?(t.addClass("mfp-loading"),g.updateStatus("error",a.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),g.updateStatus("ready"))):(g.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),g.findImageSize(e))),t}}});var N,W=function(){return void 0===N&&(N=void 0!==document.createElement("p").style.MozTransform),N};d.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var a=g.st.zoom,e=".zoom",t;if(a.enabled&&g.supportsTransition){var i=a.duration,n=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+a.duration/1e3+"s "+a.easing,n={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},o="transition";return n["-webkit-"+o]=n["-moz-"+o]=n["-o-"+o]=n[o]=i,t.css(n),t},o=function(){g.content.css("visibility","visible")},r,s;x("BuildControls"+e,function(){if(g._allowZoom()){if(clearTimeout(r),g.content.css("visibility","hidden"),!(t=g._getItemToZoom()))return void o();(s=n(t)).css(g._getOffset()),g.wrap.append(s),r=setTimeout(function(){s.css(g._getOffset(!0)),r=setTimeout(function(){o(),setTimeout(function(){s.remove(),t=s=null,I("ZoomAnimationEnded")},16)},i)},16)}}),x(c+e,function(){if(g._allowZoom()){if(clearTimeout(r),g.st.removalDelay=i,!t){if(!(t=g._getItemToZoom()))return;s=n(t)}s.css(g._getOffset(!0)),g.wrap.append(s),g.content.css("visibility","hidden"),setTimeout(function(){s.css(g._getOffset())},16)}}),x(l+e,function(){g._allowZoom()&&(o(),s&&s.remove(),t=null)})}},_allowZoom:function(){return"image"===g.currItem.type},_getItemToZoom:function(){return!!g.currItem.hasSize&&g.currItem.img},_getOffset:function(e){var t,i=(t=e?g.currItem.img:g.st.zoom.opener(g.currItem.el||g.currItem)).offset(),n=parseInt(t.css("padding-top"),10),o=parseInt(t.css("padding-bottom"),10);i.top-=d(window).scrollTop()-n;var a={width:t.width(),height:(h?t.innerHeight():t[0].offsetHeight)-o-n};return W()?a["-moz-transform"]=a.transform="translate("+i.left+"px,"+i.top+"px)":(a.left=i.left,a.top=i.top),a}}});var Z="iframe",q="//about:blank",R=function(e){if(g.currTemplate[Z]){var t=g.currTemplate[Z].find("iframe");t.length&&(e||(t[0].src=q),g.isIE8&&t.css("display",e?"block":"none"))}};d.magnificPopup.registerModule(Z,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){g.types.push(Z),x("BeforeChange",function(e,t,i){t!==i&&(t===Z?R():i===Z&&R(!0))}),x(l+"."+Z,function(){R()})},getIframe:function(e,t){var i=e.src,n=g.st.iframe;d.each(n.patterns,function(){if(-1<i.indexOf(this.index))return this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i)),i=this.src.replace("%id%",i),!1});var o={};return n.srcAction&&(o[n.srcAction]=i),g._parseMarkup(t,o,e),g.updateStatus("ready"),t}}});var K=function(e){var t=g.items.length;return t-1<e?e-t:e<0?t+e:e},D=function(e,t,i){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,i)};d.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var a=g.st.gallery,e=".mfp-gallery";if(g.direction=!0,!a||!a.enabled)return!1;C+=" mfp-gallery",x(u+e,function(){a.navigateByImgClick&&g.wrap.on("click"+e,".mfp-img",function(){if(1<g.items.length)return g.next(),!1}),b.on("keydown"+e,function(e){37===e.keyCode?g.prev():39===e.keyCode&&g.next()})}),x("UpdateStatus"+e,function(e,t){t.text&&(t.text=D(t.text,g.currItem.index,g.items.length))}),x(p+e,function(e,t,i,n){var o=g.items.length;i.counter=1<o?D(a.tCounter,n.index,o):""}),x("BuildControls"+e,function(){if(1<g.items.length&&a.arrows&&!g.arrowLeft){var e=a.arrowMarkup,t=g.arrowLeft=d(e.replace(/%title%/gi,a.tPrev).replace(/%dir%/gi,"left")).addClass(s),i=g.arrowRight=d(e.replace(/%title%/gi,a.tNext).replace(/%dir%/gi,"right")).addClass(s);t.click(function(){g.prev()}),i.click(function(){g.next()}),g.container.append(t.add(i))}}),x(o+e,function(){g._preloadTimeout&&clearTimeout(g._preloadTimeout),g._preloadTimeout=setTimeout(function(){g.preloadNearbyImages(),g._preloadTimeout=null},16)}),x(l+e,function(){b.off(e),g.wrap.off("click"+e),g.arrowRight=g.arrowLeft=null})},next:function(){g.direction=!0,g.index=K(g.index+1),g.updateItemHTML()},prev:function(){g.direction=!1,g.index=K(g.index-1),g.updateItemHTML()},goTo:function(e){g.direction=e>=g.index,g.index=e,g.updateItemHTML()},preloadNearbyImages:function(){var e=g.st.gallery.preload,t=Math.min(e[0],g.items.length),i=Math.min(e[1],g.items.length),n;for(n=1;n<=(g.direction?i:t);n++)g._preloadItem(g.index+n);for(n=1;n<=(g.direction?t:i);n++)g._preloadItem(g.index-n)},_preloadItem:function(e){if(e=K(e),!g.items[e].preloaded){var t=g.items[e];t.parsed||(t=g.parseEl(e)),I("LazyLoad",t),"image"===t.type&&(t.img=d('<img class="mfp-img" />').on("load.mfploader",function(){t.hasSize=!0}).on("error.mfploader",function(){t.hasSize=!0,t.loadError=!0,I("LazyLoadError",t)}).attr("src",t.src)),t.preloaded=!0}}}});var U="retina";d.magnificPopup.registerModule(U,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(1<window.devicePixelRatio){var i=g.st.retina,n=i.ratio;1<(n=isNaN(n)?n():n)&&(x("ImageHasSize."+U,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/n,width:"100%"})}),x("ElementParse."+U,function(e,t){t.src=i.replaceSrc(t,n)}))}}}}),P()}),jQuery(document).ready(function(i){
// Lightbox
function e(e,t){return/(png|jpg|jpeg|gif|tiff|bmp)$/.test(i(t).attr("href").toLowerCase().split("?")[0].split("#")[0])}function t(){i('a[href]:not(".kt-no-lightbox")').filter(e).attr("data-rel","lightbox")}
// Theme Lightbox
function n(){i.extend(!0,i.magnificPopup.defaults,{tClose:"",tLoading:virtue_lightbox.loading,// Text that is displayed during loading. Can contain %curr% and %total% keys
gallery:{tPrev:"",// Alt text on left arrow
tNext:"",// Alt text on right arrow
tCounter:virtue_lightbox.of},image:{tError:virtue_lightbox.error,// Error message when image could not be loaded
titleSrc:function(e){return e.el.find("img").attr("alt")}}}),i("a[rel^='lightbox']:not('.kt-no-lightbox'):not('.custom-link')").magnificPopup({type:"image"}),i("a[data-rel^='lightbox']:not('.kt-no-lightbox'):not('.custom-link')").magnificPopup({type:"image"}),i(".kad-light-gallery").each(function(){i(this).find("a[data-rel^='lightbox']:not('.kt-no-lightbox'):not('.custom-link')").magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:"title"}})}),i(".kad-light-wp-gallery").each(function(){i(this).find('a[data-rel^="lightbox"]:not(".kt-no-lightbox"):not(".custom-link")').magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(e){return e.el.find("img").attr("data-caption")}}})}),i(".kad-light-mosaic-gallery").each(function(){i(this).find('a[data-rel^="lightbox"]:not(".kt-no-lightbox"):not(".custom-link")').magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(e){return e.el.parents(".gallery_item").find("img").attr("data-caption")}}})}),
// Gutenberg Gallery
i(".wp-block-gallery").each(function(){i(this).find('a[data-rel^="lightbox"]:not(".kt-no-lightbox"):not(".custom-link")').magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(e){return e.el.parents(".blocks-gallery-item").find("figcaption").length?e.el.parents(".blocks-gallery-item").find("figcaption").html():e.el.find("img").attr("alt")}}})}),i("a.pvideolight").magnificPopup({type:"iframe"}),i("a.ktvideolight").magnificPopup({type:"iframe"}),
// WooCommerce Gallery with Zoom and slider 
i(".woocommerce-product-gallery__wrapper.woo_product_slider_enabled.woo_product_zoom_enabled").each(function(){i(this).parents(".woocommerce-product-gallery").prepend('<a href="#" class="woocommerce-product-gallery__trigger"></a>'),i(this).parents(".woocommerce-product-gallery").find("a.woocommerce-product-gallery__trigger").on("click",function(e){e.preventDefault(),2<=i(this).parents(".woocommerce-product-gallery").find(".woocommerce-product-gallery__wrapper").children().length?i(this).parents(".woocommerce-product-gallery").find(".flex-active-slide a[data-rel^='lightbox']:not('.kt-no-lightbox')").magnificPopup("open",i(this).parents(".woocommerce-product-gallery").find(".flex-active-slide").index()):i(this).parents(".woocommerce-product-gallery").find("a[data-rel^='lightbox']:not('.kt-no-lightbox')").magnificPopup("open")})})}
// Find images to open in lightbx
t(),
// init the lightbox
n(),
// re init lightbox on infiniate scroll
i(window).on("infintescrollnewelements",function(e){n()})});